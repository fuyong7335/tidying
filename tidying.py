import streamlit as st

# タイプごとのスコア管理用辞書
TYPES = {
    '🌀': '思考フリーズタイプ',
    '💭': '感情ためこみタイプ',
    '💥': '一気に燃え尽きタイプ',
    '🧺': '散らかされタイプ'
}

# 質問と選択肢（各選択肢にタイプを割り当て）
questions = [
    ("Q1. 家が散らかる原因として一番しっくりくるのは？",
     ["方法がよく分からない（🌀）",
      "思い出や感情が絡んで捨てられない（💭）",
      "一気にやろうとして途中で燃え尽きる（💥）",
      "家族が原因で片付けが進まない（🧺）"]),

    ("Q2. 『片付けなきゃ』と思うとき、まず感じることは？",
     ["何から始めればいいのかわからない（🌀）",
      "モノに罪悪感や愛着があって迷う（💭）",
      "面倒だけどやるときはガッとやる（💥）",
      "自分だけが頑張ってる気がしてしんどい（🧺）"]),

    ("Q3. 自分の片付けスタイルは？",
     ["情報を見てるだけで手が止まる（🌀）",
      "思い出に浸って進まない（💭）",
      "とにかく一気にやって終わらせたい（💥）",
      "いつも誰かに邪魔される（🧺）"]),

    ("Q4. 捨てる時に感じるのは？",
     ["いるかいらないかの判断ができない（🌀）",
      "手放すと後悔しそうで怖い（💭）",
      "勢いで捨ててしまいがち（💥）",
      "他の人のモノは勝手に捨てられない（🧺）"]),

    ("Q5. 理想の片付け状態は？",
     ["何がどこにあるか一目で分かる（🌀）",
      "思い出は大事にしつつスッキリ（💭）",
      "手間なくきれいがキープされる（💥）",
      "家族も使いやすく、散らからない（🧺）"]),
]

# 結果文（タイプ別）
RESULTS = {
    '🌀': "**あなたは『思考フリーズタイプ』**\n\n情報が多すぎて動けなくなってしまうタイプかも。\nまずは小さな場所から、1か所だけ片付けてみて。『決めなくてもやってみる』がコツだよ◎",
    '💭': "**あなたは『感情ためこみタイプ』**\n\n思い出や気持ちが詰まっていて、モノを手放すのがつらい人。\n\"未来の自分に譲る\"って感覚で整理してみてね🌱",
    '💥': "**あなたは『一気に燃え尽きタイプ』**\n\nやると決めたら一気にやるけど、続けるのが苦手かも？\n少しずつ“ペースを整える片付け”を意識すると◎",
    '🧺': "**あなたは『散らかされタイプ』**\n\n自分じゃなく、家族やまわりの影響で散らかりやすい人。\nまずは『わたしだけのエリア』を決めて、そこから整えていこう✨"
}

# LINE誘導リンク（仮）
LINE_LINK = "https://lin.ee/sample"

# UIスタート
st.title("🧹 片付け性格診断")
st.write("10問に答えるだけで、あなたの片付けタイプが分かります！")

# 回答カウント用
scores = {'🌀': 0, '💭': 0, '💥': 0, '🧺': 0}

with st.form("diagnosis_form"):
    for idx, (q, options) in enumerate(questions):
        choice = st.radio(q, options, key=f"q{idx}")
        for mark in scores:
            if mark in choice:
                scores[mark] += 1
                break
    submitted = st.form_submit_button("診断する")

if submitted:
    max_type = max(scores, key=scores.get)
    st.markdown(RESULTS[max_type])
    st.markdown("---")
    st.markdown(f"[📩 LINEでタイプ別アドバイスを受け取る]({LINE_LINK})")
    st.success(f"あなたのタイプは：{TYPES[max_type]} でした！")
